# 802.1X ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼í†µì œ(NAC) êµ¬ì¶• (FreeRADIUS)

ë³¸ ì €ì¥ì†ŒëŠ” **ê¸°ì—…(Enterprise) í™˜ê²½ì„ ê°€ì •í•œ 802.1X NAC ë©**ì…ë‹ˆë‹¤.  
**Access Switch(Authenticator) + FreeRADIUS(Authentication Server)** ë¥¼ í†µí•´ ë‹¨ë§ì˜ ë„¤íŠ¸ì›Œí¬ ì ‘ì†ì„ ì¸ì¦í•˜ê³ , ì •ì±…ì— ë”°ë¼ **í¬íŠ¸ ì œì–´ / ë™ì  VLAN í• ë‹¹ / DHCP ê¸°ë°˜ IP ë¶€ì—¬ / ë¡œê·¸(AccountingÂ·Syslog) ìˆ˜ì§‘Â·ê°€ê³µ**ê¹Œì§€ ë‹¨ê³„ì ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

> ì§„í–‰ ì¤‘(Working In Progress): ì„¤ê³„/êµ¬í˜„/ë¬¸ì„œí™”ë¥¼ ë™ì‹œì— ì§„í–‰í•©ë‹ˆë‹¤.  
> READMEëŠ” â€œì„¤ê³„(Design) â†’ êµ¬í˜„(Implementation) â†’ ê²€ì¦(Verification) â†’ ìë™í™”(Automation)â€ ìˆœìœ¼ë¡œ ì§€ì† ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

> ì¼ë¶€ ìŠ¤í¬ë¦°ìƒ·/í† í´ë¡œì§€/ì„¤ì • ê°’ì€ í˜„ì¬ êµ¬ì„±ê³¼ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©°, ìµœì‹  ìƒíƒœëŠ” **ë ˆí¬ì§€í† ë¦¬ì˜ ìµœê·¼ ì»¤ë°‹**ì„ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.

---

## 1) ì „ì²´ êµ¬ì„±ë„

### ğŸ§± ê°€ìƒí™” í™˜ê²½(VMware + EVE-NG) êµ¬ì„±

<img width="300" height="310" alt="ìŠ¤í¬ë¦°ìƒ· 2026-01-22 094737" src="https://github.com/user-attachments/assets/855a9778-679e-48e2-9227-1802b60cd33a" />


### ğŸ§±EVE NG Lab
<img width="1239" height="986" alt="ìŠ¤í¬ë¦°ìƒ· 2026-02-03 164404" src="https://github.com/user-attachments/assets/5220bc87-f474-4469-96b3-142dc6b3585d" />


### ğŸ§± VLAN & Subnet Design (Enterprise)

<img width="1771" height="988" alt="ìŠ¤í¬ë¦°ìƒ· 2026-02-12 174246" src="https://github.com/user-attachments/assets/d41509e0-16f9-4007-9b81-91cd08853354" />



---

## 2) VLAN / Subnet ìš”ì•½

### 2.1 ê´€ë¦¬/ë³´ì•ˆ ì¸í”„ë¼
| VLAN | Name | ëª©ì  | Subnet | Gateway(SVI) |
|---:|---|---|---|---|
| 100 | Management_Security | ë³´ì•ˆ/ì¸ì¦ ì¸í”„ë¼(FreeRADIUS/DHCP/Log) | 10.0.10.0/28 | 10.0.10.1 |
| 110 | Management_Device | ë„¤íŠ¸ì›Œí¬ ì¥ë¹„ ê´€ë¦¬(SSH/SNMP/Syslog ë“±) | 10.0.11.0/28 | 10.0.11.1 |

### 2.2 ì„œë²„ ì¡´
| VLAN | Name | ëª©ì  | Subnet | Gateway(SVI) |
|---:|---|---|---|---|
| 200 | Server_Development | ê°œë°œ ì„œë²„ ì¡´ | 10.0.20.0/28 | 10.0.20.1 |
| 210 | Server_Business | í–‰ì •/ì—…ë¬´ ì„œë²„ ì¡´ | 10.0.21.0/28 | 10.0.21.1 |

### 2.3 ì‚¬ìš©ì ì¡´(ë¶€ì„œ/ì—­í•  ê¸°ë°˜)
| VLAN | Name | ëŒ€ìƒ | Subnet | Gateway(SVI) |
|---:|---|---|---|---|
| 300 | User_Security | ë³´ì•ˆ ë¶€ì„œ | 10.0.30.0/24 | 10.0.30.1 |
| 310 | User_Development | ê°œë°œ ë¶€ì„œ | 10.0.31.0/24 | 10.0.31.1 |
| 320 | User_Business | í–‰ì •/ì—…ë¬´ ë¶€ì„œ | 10.0.32.0/24 | 10.0.32.1 |
| 330 | User_Partner_Company | í˜‘ë ¥ì—…ì²´ | 10.0.33.0/24 | 10.0.33.1 |
| 340 | User_Guest | ë°©ë¬¸ì(ê²ŒìŠ¤íŠ¸) | 10.0.34.0/24 | 10.0.34.1 |

### 2.4 ì§ì› ìƒí™œë§(ì‚¬ë‚´ë§ê³¼ ë¶„ë¦¬)
| VLAN | Name | ëª©ì  | Subnet | Gateway(SVI) |
|---:|---|---|---|---|
| 500 | User_Coporation_Life | **ì§ì› ìƒí™œë§(ì¸í„°ë„· ì „ìš©, ì‚¬ë‚´ë§ ì ‘ê·¼ ì œí•œ)** | 172.16.50.0/24 | 172.16.50.1 |

### 2.5 802.1X ì¸ì¦ íë¦„ VLAN
| VLAN | Name | ëª©ì  | Subnet | Gateway(SVI) |
|---:|---|---|---|---|
| 800 | Auth_Fail | ì¸ì¦ ì‹¤íŒ¨(ê²©ë¦¬/ì œí•œ) | 10.0.80.0/24 | 10.0.80.1 |
| 810 | Auth_Service | ì¸ì¦/ì˜¨ë³´ë”©(ì„ì‹œ) | 10.0.81.0/24 | 10.0.81.1 |

---

## 3) êµ¬ì„± ìš”ì†Œì™€ ì—­í• 

- **Supplicant(ìš”ì²­ì)**: ì¸ì¦ ëŒ€ìƒ ë‹¨ë§(Windows ë“±)
  - ë§í¬ ì—… ì‹œ EAPOLë¡œ 802.1X ì¸ì¦ ì‹œì‘
- **Authenticator(ì¸ì¦ì)**: Access Switch
  - EAPOLì„ ì¤‘ê³„í•˜ê³ , RADIUS ê²°ê³¼ì— ë”°ë¼ í¬íŠ¸ ì œì–´ ë° VLAN ì „í™˜
- **Authentication Server(ì¸ì¦ ì„œë²„)**: FreeRADIUS
  - ì¸ì¦(PEAP/EAP-TLS ë“±) ìˆ˜í–‰
  - ì •ì±… ê¸°ë°˜ VLAN ID(Tunnel-Private-Group-ID) ë°˜í™˜ ê°€ëŠ¥
- **DHCP Server**
  - VLANë³„ ì£¼ì†Œ í’€ ìš´ì˜ ë° IP í• ë‹¹
  - ì¸ì¦ ì„±ê³µ í›„ í•´ë‹¹ VLANì—ì„œ ì •ìƒ IP í• ë‹¹ì´ ë˜ëŠ”ì§€ ê²€ì¦
- **Syslog â†’ MySQL(DB)**
  - DHCP ì´ë²¤íŠ¸ë¥¼ í¬í•¨í•œ ì‹œìŠ¤í…œ ë¡œê·¸ë¥¼ DBì— ì ì¬
  - ì´í›„ **DHCPACK ë¡œê·¸ íŒŒì‹± â†’ ë³„ë„ í…Œì´ë¸”ë¡œ ì •ê·œí™”**í•˜ì—¬ í™œìš©
- **Distribution/Core(ê²Œì´íŠ¸ì›¨ì´)**
  - SVI ê¸°ë°˜ Inter-VLAN Routing
  - ìƒë‹¨ Edge/Internet êµ¬ê°„ê³¼ ì—°ë™

---

## 4) ì ‘ê·¼í†µì œ(Policy) ê°œìš”

### 4.1 ë³´ì•ˆ/ì¸ì¦ ì¸í”„ë¼(VLAN100)
- ê´€ë¦¬ìë§Œ ì ‘ê·¼ (ê¸°ë³¸ ì°¨ë‹¨ + ì˜ˆì™¸ í—ˆìš©)
- ì„œë¹„ìŠ¤ í¬íŠ¸ ë‹¨ìœ„ë¡œ ìµœì†Œ í—ˆìš©
  - ì˜ˆ: SSH(22), RADIUS(1812/1813), DHCP(67/68), DNS(53), HTTP/HTTPS(80/443)

### 4.2 ê´€ë¦¬ VLAN(VLAN110)
- ì¥ë¹„ ê´€ë¦¬ íŠ¸ë˜í”½(SSH/SNMP/Syslog) ì¤‘ì‹¬
- FreeRADIUS/DHCP/ë¡œê·¸ ì„œë²„ì™€ ìš´ì˜ í†µì‹  í—ˆìš©

### 4.3 ì§ì› ìƒí™œë§(VLAN500)
- **ì‚¬ë‚´ë§(User/Server/Management)ìœ¼ë¡œ ë¼ìš°íŒ… ê¸ˆì§€**
- ì¸í„°ë„·(ì™¸ë¶€)ë§Œ í—ˆìš©í•˜ëŠ” â€œë¶„ë¦¬ë§â€ ì»¨ì…‰

---

## 5) ë‹¨ê³„ë³„ êµ¬í˜„ ê³„íš (Roadmap)

### 6.1 ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼(EVE-NG)
- [x] L2/L3 ìŠ¤ìœ„ì¹˜/ì—£ì§€/ì„œë²„ ê¸°ë³¸ ì—°ê²°
- [x] VMware NAT(vmnet8) ê¸°ë°˜ ì™¸ë¶€ ì¸í„°ë„· ì ‘ê·¼ ê²½ë¡œ í™•ë³´(íŒ¨í‚¤ì§€ ì„¤ì¹˜/ì—…ë°ì´íŠ¸ ëª©ì )
- [x] VLAN/ê²Œì´íŠ¸ì›¨ì´(SVI) ë¼ˆëŒ€ êµ¬ì„±

### 6.2 802.1X ì¸ì¦ ì¸í”„ë¼(FreeRADIUS)
- [x] Ubuntu ì„œë²„ ê¸°ë³¸ ì„¸íŒ…
- [x] FreeRADIUS ì„¤ì¹˜ ë° ì´ˆê¸° êµ¬ì„±
- [x] í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì/ì¸ì¦ì(ìŠ¤ìœ„ì¹˜) ë“±ë¡ ë° ì¸ì¦ íë¦„ ê²€ì¦(PEAP ê¸°ë°˜)

### 6.3 DHCP êµ¬ì„±
- [x] VLANë³„ DHCP Scope/Pool êµ¬ì„±
- [x] ë‹¨ë§ DHCP í• ë‹¹ ê²€ì¦(ì¸ì¦/ë¹„ì¸ì¦ í¬íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ë¦¬)
- [x] ì¸ì¦ ì„±ê³µ í›„ VLAN ì „í™˜ + DHCP ì¬í• ë‹¹(End-to-End ê²€ì¦)

### 6.4 Syslog â†’ MySQL ì ì¬ ë° DHCP ë¡œê·¸ ì •ê·œí™” 
- [x] `rsyslog-mysql` ì„¤ì¹˜ ë° MySQL(syslog) ì ì¬ í™•ì¸
- [x] ê³„ì •/ê¶Œí•œ í™•ì¸ ë° `SystemEvents` ë¡œê·¸ ì €ì¥ ì—¬ë¶€ ê²€ì¦
- [x] `DHCPACK on%` ë©”ì‹œì§€ íŒ¨í„´ ì‹ë³„ ë° íŒŒì‹± ëŒ€ìƒ í•„ë“œ ì •ì˜  
- [x] `syslog.SystemEvents`ì—ì„œ DHCP ê´€ë ¨ ë¡œê·¸ ì¡°íšŒ/í•„í„°ë§ ê²€ì¦ (`Message LIKE 'DHCPACK on%'`)
- [x] `radius` DBì— `dhcp_log` í…Œì´ë¸” ìƒì„± í›„, SystemEvents ë¡œê·¸ë¥¼ íŒŒì‹±í•˜ì—¬ ì €ì¥(ì •ê·œí™”) ì™„ë£Œ
- [x] ì ì¬ ê²°ê³¼ ê²€ì¦: `radius.dhcp_log`ì— ìµœì‹  ë ˆì½”ë“œê°€ ëˆ„ì ë˜ëŠ”ì§€ í™•ì¸
- [x] ì ì¬ëœ ì´ë²¤íŠ¸ ì¤‘ `DHCPACK on%` ë©”ì‹œì§€ë¥¼ ìë™ ì‹ë³„Â·íŒŒì‹±í•˜ì—¬ `radius.dhcp_log` í…Œì´ë¸”ì— ì •ê·œí™” í˜•íƒœë¡œ ì§€ì† ì €ì¥(ìë™í™”)
- [x] DHCP ê³ ì • IP ì£¼ì†Œ í• ë‹¹ì„ ìœ„í•œ `vlan_subnet_profiles` VLANë³„ ì„œë¸Œë„· í”„ë¡œíŒŒì¼ í…Œì´ë¸”ê³¼ `subnet_ip_pool` ì„œë¸Œë„·ë³„ IP ëª©ë¡ + ìƒíƒœ + MAC ë§¤í•‘ í…Œì´ë¸” ìƒì„±
- [x] `vlan_subnet_profiles` BEFROE INSERT TRIGGER ë“±ë¡ [ `broadcast_addr, gateway_addr, start_ip_addr/end_ip_addr -> start_ip_number/end_ip_number, vlan_group_name = VLAN_<id> ìë™ ì„¤ì •` ]
- [ ] `vlan_subnet_profiles` ë“±ë¡ í›„ `subnet_ip_pool` ìë™ ìƒì„±í•˜ëŠ” AFTER INSERT TRIGGER ë“±ë¡
  
---
